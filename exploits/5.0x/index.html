
<!DOCTYPE html>
<html>
<head>
	<title>PS4 Exploit Loader &bull; 84Ciss</title>
	<link href="custom.css" rel="stylesheet" type="text/css">
	<script src="screen.js" type="text/javascript">
	</script>
</head>
<body onload="runExploit()">
	<div class="container">
		<div class="ps4-icons">
			<div class="square-icon ps-icon"></div>
			<div class="cross-icon ps-icon"></div>
			<div class="circle-icon ps-icon"></div>
			<div class="triangle-icon ps-icon"></div>
		</div>
	</div>
	<div class="loader" id="loader"></div>
	<div class="info" id="allset" style="display:none;">
		You're all set!
	</div>
	<div class="info" id="fail" style="display:none;">
		Something went wrong :(
	</div>
	<div class="info" id="badfw" style="display:none;">
		Only firmware 5.05 is supported!
	</div>
	<div class="credits">
		<script type="text/javascript">
		            document.write(new Date().getFullYear());
		</script>&copy; <a href="https://twitter.com/84Ciss">84Ciss</a><br>
		PS4Xploit v1 is not associated in any way with <a href="https://playstation.com">Playstation</a> and <a href="https://psxhax.com/">PSXHAX</a>.
	</div>
	<script>
	   function runExploit() {
	     setTimeout(exploit, 1500);
	   }
     
     function clean()
    {
      document.getElementById("scratchpad").innerHTML = "</br>";
    }
    function print(ele)
    {
      document.getElementById("scratchpad").innerHTML += ele;
    }
    function ls(path)
    {
      clean();

      var sep = "/";
      if (path[path.length-1]=="/") sep = "";

      var fd = p.syscall("sys_open", p.sptr(path), 0x1100004).low;
      if (fd == (-1 >>> 0))
      {
        print("open("+path+"): -1</br>");
        print("<a href=javascript:window.ls('/');>ls /</a>");
        return;
      }

      print("Directory listing for " +path+":<br/>");
      var total = p.syscall("sys_getdents", fd, lsscrtch, 0x1000).low;
      if (total == (-1 >>> 0))
      {
        print("getdents("+path+"): -1</br>");
        print("<a href=javascript:window.ls('/');>ls /</a>");
        return;
      }

      var offset = 0;
      while (offset < total)
      {
        var cur = lsscrtch.add32(offset);
        var reclen = p.read4(cur.add32(4)) & 0xFFFF;
        var filepath = path + sep + p.readString(cur.add32(8));
        print("<a href=javascript:window.ls('" + filepath + "');>" + filepath + "</a><br/>");
        offset += reclen;
        if(!reclen) break;
      }
      p.syscall("sys_close", fd);
    }

    function done()
    {
       lsscrtch32 = new Uint32Array(0x400);
       lsscrtch = p.read8(p.leakval(lsscrtch32).add32(0x10));
       ls('/');
    }
    function allset() {
      document.getElementById("loader").style.display = "none";
      document.getElementById("scratchpad").style.display = "block";
    }
	   function allset() {
	     document.getElementById("loader").style.display = "none";
	     document.getElementById("allset").style.display = "block";
	   }

	   function fail(info) {
	     document.getElementById("loader").style.display = "none";
	     document.getElementById("fail").style.display = "block";

	     alert(info)
	   }
	</script> 
	<script src="rop.js"></script>
  <script src="syscalls.js"></script>
  <!--<script src="homebrew.js"></script>-->
  <script src="loader.js"></script>
  <script src="userland.js"></script>
  <script src="kernel.js"></script>

</body>
</html>